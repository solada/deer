# 鹿鹿论坛微信小程序

这是一个完整的微信小程序项目，用于连接鹿鹿论坛后端服务。

## 🚀 功能特性

### ✅ 已实现功能

1. **用户系统**
   - 用户注册
   - 用户登录
   - 自动登录状态管理
   - 退出登录

2. **帖子功能**
   - 获取帖子列表（分页加载）
   - 查看帖子详情
   - 发布新帖子
   - 删除自己的帖子（作者权限）

3. **评论系统**
   - 查看帖子评论
   - 发表评论
   - 回复评论（支持嵌套）

4. **用户界面**
   - 响应式设计
   - 现代化 UI 风格
   - 流畅的交互体验
   - 完善的错误处理

## 📱 页面结构

```
pages/
├── index/          # 首页（帖子列表）
├── login/          # 登录页面
├── register/       # 注册页面
├── post-detail/    # 帖子详情页
├── publish/        # 发布帖子页
└── profile/        # 个人中心页
```

## 🛠️ 开发环境

### 前置要求

1. **微信开发者工具**
   - 下载并安装微信开发者工具
   - 版本要求：最新稳定版

2. **服务器配置**
   - 确保后端服务正常运行
   - 域名：`https://deerlulu1008.cn`
   - SSL 证书配置正确

### 项目配置

1. **修改 AppID**
   ```json
   // project.config.json
   {
     "appid": "your-appid-here"  // 替换为你的小程序 AppID
   }
   ```

2. **服务器域名配置**
   在微信小程序管理后台配置：
   - **request 合法域名**: `https://deerlulu1008.cn`

## 🔧 本地开发

### 1. 导入项目

1. 打开微信开发者工具
2. 选择「导入项目」
3. 选择 `miniprogram` 目录
4. 填入你的 AppID
5. 点击「导入」

### 2. 开发调试

1. **启用调试模式**
   - 在开发者工具中勾选「不校验合法域名」
   - 这样可以在开发阶段使用 localhost

2. **修改 API 地址**（仅开发时）
   ```javascript
   // app.js - globalData
   baseUrl: 'http://localhost:3000/api'  // 开发环境
   // baseUrl: 'https://deerlulu1008.cn/api'  // 生产环境
   ```

3. **实时预览**
   - 使用开发者工具的实时预览功能
   - 在真机上测试功能

## 🎨 UI 设计说明

### 设计理念
- **简洁现代**：采用卡片式设计，界面简洁清爽
- **绿色主题**：使用微信绿色作为主色调
- **响应式**：适配不同屏幕尺寸
- **用户友好**：提供清晰的操作反馈

### 色彩方案
- **主色调**: `#1AAD19` (微信绿)
- **辅助色**: `#16a085` (深绿)
- **文字色**: `#333333` (深灰)
- **次要文字**: `#666666` (中灰)
- **提示文字**: `#999999` (浅灰)
- **危险色**: `#ff4757` (红色)

### 组件说明
- **卡片**: 使用圆角和阴影效果
- **按钮**: 提供多种状态样式
- **头像**: 使用首字母作为默认头像
- **输入框**: 聚焦时高亮边框

## 📋 API 接口

所有 API 请求都通过 `app.request()` 方法统一处理：

### 用户接口
- `POST /register` - 用户注册
- `POST /login` - 用户登录

### 帖子接口
- `GET /posts` - 获取帖子列表
- `POST /posts` - 发布帖子
- `GET /posts/:id` - 获取帖子详情
- `DELETE /posts/:id` - 删除帖子

### 评论接口
- `POST /posts/:id/comments` - 发表评论

## 🔐 权限控制

### 登录检查
- 自动检查登录状态
- Token 过期自动跳转登录
- 未登录用户的功能限制

### 操作权限
- 只有帖子作者可以删除帖子
- 只有登录用户可以发帖和评论
- 评论回复功能需要登录

## 📊 数据流管理

### 全局状态
```javascript
// app.js - globalData
{
  userInfo: null,    // 用户信息
  token: null,       // 认证令牌
  baseUrl: 'https://deerlulu1008.cn/api'  // API 基础地址
}
```

### 本地存储
- `userInfo` - 用户信息
- `token` - 认证令牌

## 🚀 部署上线

### 1. 配置检查
- [ ] 修改 AppID 为正式 AppID
- [ ] 确认 API 地址为生产环境
- [ ] 配置服务器域名白名单

### 2. 代码审核
- [ ] 功能测试完成
- [ ] 真机测试通过
- [ ] 性能优化完成

### 3. 提交审核
1. 在微信开发者工具中点击「上传」
2. 在微信小程序管理后台提交审核
3. 等待审核通过后发布

## 🐛 常见问题

### 1. 网络请求失败
- **问题**: API 请求返回网络错误
- **解决**: 检查服务器域名配置和 SSL 证书

### 2. 登录状态丢失
- **问题**: 用户登录状态经常丢失
- **解决**: 检查 Token 存储和过期处理逻辑

### 3. 页面白屏
- **问题**: 页面加载后显示白屏
- **解决**: 检查数据绑定和条件渲染逻辑

### 4. 图标不显示
- **问题**: 底部导航栏图标不显示
- **解决**: 添加对应的图标文件到 `images/` 目录

## 🔄 版本更新

### v1.0.0 (当前版本)
- ✅ 基础用户系统
- ✅ 帖子发布和浏览
- ✅ 评论和回复功能
- ✅ 删帖功能

### 计划功能
- [ ] 帖子搜索
- [ ] 用户关注
- [ ] 消息通知
- [ ] 帖子点赞
- [ ] 图片上传
- [ ] 个人主页

## 📞 技术支持

如果在开发过程中遇到问题，可以：

1. 查看微信开发者工具的调试信息
2. 检查服务器端的日志输出
3. 确认网络连接和域名配置

---

**开发者**: Deer Server Team  
**更新时间**: 2025年9月22日  
**版本**: 1.0.0
